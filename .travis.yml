language: cpp
cache:
  - apt
  - ccache

compiler:
  - gcc

addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - curl
      - git
      - libjudy-dev
      - libgmp-dev
      - libpcap-dev
      - libboost-all-dev
      - libevent-dev
      - libtool
      - flex
      - bison
      - pkg-config
      - libssl-dev
      - libgmp10
      - libjudydebian1
      - libpcap0.8
      - python

script:
  - ccache -M 1G
  - ccache -z
  - git clone https://github.com/p4lang/behavioral-model.git
  - cd behavioral-model && bash travis/install-thrift.sh && bash travis/install-nanomsg.sh && ./autogen.sh && ./configure 'CXXFLAGS=-Wno-sign-compare' && make && sudo make install
  - sudo ldconfig
  - simple_switch --version
